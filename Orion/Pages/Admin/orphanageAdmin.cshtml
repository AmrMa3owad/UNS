@page
@model Orion.Pages.Admin.orphanageAdminModel
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
    <title>Orphanage</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <link rel="stylesheet" href="cssAdmin/profilee.css" />
</head>
<body>
    <div class="header__wrapper">
        <header></header>
        <div class="cols__container">
            <div class="left__col">
                <div class="img__container">
                    @if (Model.OrphanageImg != null && Model.OrphanageImg.Any())
                    {
                        <img src="data:image/jpeg;base64,@Convert.ToBase64String(Model.OrphanageImg)" alt="Orphanage Photo" />
                    }
                </div>
                <h2>@Model.OrphanageName</h2>
                <p>@Model.OrphanageRegion</p>
                <ul class="about">
                    <li><span>@Model.OrphanageFreelancer</span> Children</li>
                    <li><span>@Model.ProductsNum</span> Products</li>
                    <li><span>11</span> Sold</li> <!-- Placeholder, replace with actual sold data if available -->
                </ul>
                <div class="content">
                    <p>@Model.OrphanageInfo</p>
                    <div class="editProfileBtn">
                        <a href="editOrphanage.html?orphanageId=@Model.Orphanage.Id" class="editProfile"><i class="fas fa-edit"></i>Edit profile</a>
                </div>
            </div>
            <div class="right__col">
                <nav>
                    <h2>@Model.OrphanageName Products</h2>
                </nav>
                <div class="photos">
                    @foreach (var product in Model.OrphanageProduct)
                    {
                        var name = product.ProductName;
                        var img = product.ProductImage;
                        var price = product.ProductPrice;
                        var id = product.Id;
                        var imgSrc = img != null ? $"data:image/jpeg;base64,{Convert.ToBase64String(img)}" : "img/product1.jpg"; // Fallback image

                        <div class="product-box">
                            <a href="details.html?id=@id"><img src="@imgSrc" alt="@name" class="product-img"></a>
                            <h2 class="product-title">@name</h2>
                            <span class="product-price">$@price</span>
                            <input type="hidden" value="@id" class="product-id">
                            <i class='bx bx-shopping-bag add-cart'></i>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</body>
</html>
